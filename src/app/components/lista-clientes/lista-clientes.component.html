<div class="container mt-4 fade-in">
    <!-- Header -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
          <h2 class="text-primary mb-0">
            <i class="fas fa-list me-2"></i>
            Lista de Clientes
          </h2>
        </div>
      </div>
    </div>
  
    
  
    <!-- Loading State -->
    <div *ngIf="isLoading" class="text-center py-5">
      <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;"></div>
      <p class="mt-3 text-muted">Cargando clientes...</p>
    </div>
  
    <!-- Error State -->
    <div *ngIf="error" class="alert alert-danger">
      <i class="fas fa-exclamation-triangle me-2"></i>
      {{ error }}
      <button class="btn btn-sm btn-outline-danger ms-3" (click)="cargarClientes()">
        Reintentar
      </button>
    </div>
  
    <!-- No Data State -->
    <div *ngIf="!isLoading && !error && totalClientes === 0" class="text-center py-5">
      <i class="fas fa-users-slash fa-3x text-muted mb-3"></i>
      <h4 class="text-muted">No hay clientes registrados</h4>
      <p class="text-muted">Agrega tu primer cliente para comenzar</p>
      <a routerLink="/crear-cliente" class="btn btn-primary">
        <i class="fas fa-user-plus me-2"></i>
        Crear Cliente
      </a>
    </div>
  
    <!-- No Results State -->
    <div *ngIf="!isLoading && !error && totalClientes > 0 && clientesMostrados === 0" class="text-center py-5">
      <i class="fas fa-search-minus fa-3x text-muted mb-3"></i>
      <h4 class="text-muted">No se encontraron clientes</h4>
      <p class="text-muted">Intenta con otros términos de búsqueda</p>
      <button class="btn btn-outline-primary" (click)="limpiarFiltro()">
        <i class="fas fa-times me-2"></i>
        Limpiar Filtro
      </button>
    </div>
  
    <!-- Tabla de Clientes -->
    <div *ngIf="!isLoading && !error && clientesMostrados > 0" class="card border-0 shadow-sm">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead class="table-dark">
            <tr>
              <th scope="col" class="sortable" (click)="ordenarPor('nombre')">
                <i class="fas fa-user me-2"></i>
                Nombre
                <i [class]="getIconoOrden('nombre')" class="ms-2"></i>
              </th>
              <th scope="col" class="sortable" (click)="ordenarPor('apellido')">
                <i class="fas fa-user-tag me-2"></i>
                Apellido
                <i [class]="getIconoOrden('apellido')" class="ms-2"></i>
              </th>
              <th scope="col" class="text-center sortable" (click)="ordenarPor('edad')">
                <i class="fas fa-birthday-cake me-2"></i>
                Edad
                <i [class]="getIconoOrden('edad')" class="ms-2"></i>
              </th>
              <th scope="col" class="text-center sortable" (click)="ordenarPor('fechaNacimiento')">
                <i class="fas fa-calendar-alt me-2"></i>
                F. Nacimiento
                <i [class]="getIconoOrden('fechaNacimiento')" class="ms-2"></i>
              </th>
              <th scope="col" class="text-center sortable" (click)="ordenarPor('fechaProbableMuerte')">
                <i class="fas fa-hourglass-end me-2"></i>
                F. Probable Muerte
                <i [class]="getIconoOrden('fechaProbableMuerte')" class="ms-2"></i>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let cliente of clientesFiltrados; let i = index" 
                class="table-row"
                [class.table-warning]="calcularAnosRestantes(cliente.fechaProbableMuerte) < 20">
              <td class="fw-semibold">{{ cliente.nombre }}</td>
              <td class="fw-semibold">{{ cliente.apellido }}</td>
              <td class="text-center">
                <span class="badge bg-info">{{ cliente.edad }} años</span>
              </td>
              <td class="text-center">{{ formatearFecha(cliente.fechaNacimiento) }}</td>
              <td class="text-center">{{ formatearFecha(cliente.fechaProbableMuerte) }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  
    